{
  "__contractCmd": "report:ci",
  "payload": {
    "appsDiscovered": 5,
    "appsFound": 5,
    "buildSafety": {
      "enforcementEvidence": {
        "contractLockedFixtures": [
          {
            "expected": {
              "exitCode": 0,
              "ok": true
            },
            "snapshotKey": "build@fixture:dry_run_ok"
          },
          {
            "expected": {
              "errorCode": "ERR_OUT_NOT_EMPTY",
              "exitCode": 1,
              "ok": false
            },
            "snapshotKey": "build@fixture:out_not_empty"
          }
        ],
        "enforcementLocation": "contract:run"
      },
      "ok": true,
      "overwritePolicy": {
        "errorCode": "ERR_OUT_NOT_EMPTY",
        "notes": [
          "Overwrite policy v2 blocks writes when output directory is not empty.",
          "Enforcement is validated via contract-locked build fixtures in contract:run."
        ],
        "outNotEmptyBlocked": true
      },
      "policyVersion": 2
    },
    "finishedAt": null,
    "hardFailCount": 4,
    "healManifest": false,
    "include": null,
    "installMode": null,
    "max": null,
    "ok": false,
    "passCount": 0,
    "profile": null,
    "results": [
      {
        "appPath": "<PATH>",
        "ci": {
          "hardFail": true,
          "reason": "failure:HEALTH_FAIL:health",
          "severity": "fail",
          "warn": false
        },
        "ciAfterHeal": null,
        "exitCode": 11,
        "healedManifest": null,
        "validate": {
          "appPath": "<PATH>",
          "didInstall": true,
          "installMode": "always",
          "manifestIntegrity": {
            "currentFingerprint": "<HASH>",
            "expectedFingerprint": "<HASH>",
            "manifestPath": "<PATH>",
            "matches": true,
            "ok": true
          },
          "ok": false,
          "profile": "fixture",
          "template": "fixture",
          "validation": {
            "appPath": "<PATH>",
            "baseUrl": null,
            "checks": [
              {
                "class": "HEALTH_FAIL",
                "details": {
                  "code": "ERR_HEALTH_CONNREFUSED",
                  "message": "connect ECONNREFUSED 127.0.0.1:50745",
                  "url": ""
                },
                "id": "health",
                "ok": false,
                "required": true
              }
            ],
            "durationMs": 0,
            "failureClass": "HEALTH_FAIL",
            "finishedAt": null,
            "ok": false,
            "startedAt": null,
            "template": "fixture"
          }
        },
        "validateAfterHeal": null
      },
      {
        "appPath": "<PATH>",
        "ci": {
          "hardFail": true,
          "reason": "failure:HEALTH_FAIL:health",
          "severity": "fail",
          "warn": false
        },
        "ciAfterHeal": null,
        "exitCode": 11,
        "healedManifest": null,
        "validate": {
          "appPath": "<PATH>",
          "didInstall": true,
          "installMode": "always",
          "manifestIntegrity": {
            "currentFingerprint": "<HASH>",
            "expectedFingerprint": "<HASH>",
            "manifestPath": "<PATH>",
            "matches": true,
            "ok": true
          },
          "ok": false,
          "profile": "fixture",
          "template": "fixture",
          "validation": {
            "appPath": "<PATH>",
            "baseUrl": null,
            "checks": [
              {
                "class": "HEALTH_FAIL",
                "details": {
                  "code": "ERR_HEALTH_TIMEOUT",
                  "message": "Health request timed out.",
                  "url": ""
                },
                "id": "health",
                "ok": false,
                "required": true
              }
            ],
            "durationMs": 0,
            "failureClass": "HEALTH_FAIL",
            "finishedAt": null,
            "ok": false,
            "startedAt": null,
            "template": "fixture"
          }
        },
        "validateAfterHeal": null
      },
      {
        "appPath": "<PATH>",
        "ci": {
          "hardFail": false,
          "reason": "manifest_integrity",
          "severity": "warn",
          "warn": true
        },
        "ciAfterHeal": null,
        "exitCode": 13,
        "healedManifest": null,
        "validate": {
          "appPath": "<PATH>",
          "didInstall": false,
          "installMode": "always",
          "manifestIntegrity": {
            "currentFingerprint": "<HASH>",
            "error": {
              "code": "ERR_MANIFEST_DRIFT",
              "details": {
                "currentFingerprint": "<HASH>",
                "expectedFingerprint": "<HASH>"
              },
              "message": "Manifest fingerprint does not match current app fingerprint (drift detected)."
            },
            "expectedFingerprint": "<HASH>",
            "manifestPath": "<PATH>",
            "ok": false
          },
          "ok": false,
          "profile": "fixture",
          "template": "fixture",
          "validation": {
            "appPath": "<PATH>",
            "baseUrl": null,
            "checks": [
              {
                "class": "SCHEMA_FAIL",
                "details": {
                  "code": "ERR_MANIFEST_INTEGRITY",
                  "currentFingerprint": "<HASH>",
                  "details": {
                    "currentFingerprint": "<HASH>",
                    "expectedFingerprint": "<HASH>"
                  },
                  "expectedFingerprint": "<HASH>",
                  "integrityErrorCode": "ERR_MANIFEST_DRIFT",
                  "manifestPath": "<PATH>",
                  "message": "Manifest fingerprint does not match current app fingerprint (drift detected)."
                },
                "id": "manifest_integrity",
                "ok": false,
                "required": true
              }
            ],
            "durationMs": 0,
            "failureClass": "SCHEMA_FAIL",
            "finishedAt": null,
            "ok": false,
            "startedAt": null,
            "template": "fixture"
          }
        },
        "validateAfterHeal": null
      },
      {
        "appPath": "<PATH>",
        "ci": {
          "hardFail": true,
          "reason": "failure:BOOT_FAIL:install",
          "severity": "fail",
          "warn": false
        },
        "ciAfterHeal": null,
        "exitCode": 10,
        "healedManifest": null,
        "validate": {
          "appPath": "<PATH>",
          "didInstall": false,
          "installMode": "always",
          "manifestIntegrity": {
            "currentFingerprint": "<HASH>",
            "expectedFingerprint": "<HASH>",
            "manifestPath": "<PATH>",
            "matches": true,
            "ok": true
          },
          "ok": false,
          "profile": "fixture",
          "template": "fixture",
          "validation": {
            "appPath": "<PATH>",
            "baseUrl": null,
            "checks": [
              {
                "class": "BOOT_FAIL",
                "details": {
                  "code": "ERR_NPM_INSTALL_EXIT",
                  "exitCode": 1,
                  "installMode": "always",
                  "message": "npm install failed (exit 1)."
                },
                "id": "install",
                "ok": false,
                "required": true
              }
            ],
            "durationMs": 0,
            "failureClass": "BOOT_FAIL",
            "finishedAt": null,
            "ok": false,
            "startedAt": null,
            "template": "fixture"
          }
        },
        "validateAfterHeal": null
      },
      {
        "appPath": "<PATH>",
        "ci": {
          "hardFail": true,
          "reason": "failure:BOOT_FAIL:start",
          "severity": "fail",
          "warn": false
        },
        "ciAfterHeal": null,
        "exitCode": 10,
        "healedManifest": null,
        "validate": {
          "appPath": "<PATH>",
          "didInstall": true,
          "installMode": "always",
          "manifestIntegrity": {
            "currentFingerprint": "<HASH>",
            "expectedFingerprint": "<HASH>",
            "manifestPath": "<PATH>",
            "matches": true,
            "ok": true
          },
          "ok": false,
          "profile": "fixture",
          "template": "fixture",
          "validation": {
            "appPath": "<PATH>",
            "baseUrl": null,
            "checks": [
              {
                "class": "BOOT_FAIL",
                "details": {
                  "code": "ERR_NPM_START_EXIT",
                  "exitCode": 3,
                  "message": "npm start exited early (exit 3).",
                  "stdoutSnippet": "> fixture-err-npm-start-exit@1.0.0 start > node -e \"process.exit(3)\""
                },
                "id": "start",
                "ok": false,
                "required": true
              }
            ],
            "durationMs": 0,
            "failureClass": "BOOT_FAIL",
            "finishedAt": null,
            "ok": false,
            "startedAt": null,
            "template": "fixture"
          }
        },
        "validateAfterHeal": null
      }
    ],
    "rootPath": "<PATH>",
    "startedAt": null,
    "warnCount": 1
  }
}
